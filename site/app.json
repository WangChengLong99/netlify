[{"name": "app.py", "content": "ZnJvbSBzaGlueSBpbXBvcnQgQXBwLCByZW5kZXIsIHVpLCByZWFjdGl2ZQppbXBvcnQgcGFuZGFzIGFzIHBkCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgbWF0cGxvdGxpYi5weXBsb3QgYXMgcGx0CnBsdC5yY1BhcmFtc1snZm9udC5zYW5zLXNlcmlmJ109WydTaW1oZWknXTsgI1NpbUhlaem7keS9kyAKcGx0LnJjUGFyYW1zWydheGVzLnVuaWNvZGVfbWludXMnXT1GYWxzZTsgI+ato+W4uOaYvuekuuWbvuS4rei0n+WPtwoKc3R5bGVzID0gewogICAgInRhYmxlX2NvbnRhaW5lcl9kaXYiIDogIm92ZXJmbG93LXg6IGF1dG87b3ZlcmZsb3cteTogc2Nyb2xsO21heC1oZWlnaHQ6e31weDttaW4td2lkdGg6MTAwJTsiLCAKICAgICJ0YWJsZSIgOiAiYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTttaW4td2lkdGg6MTAwJTt0YWJsZS1sYXlvdXQ6IGZpeGVkOyIsICAgIAogICAgInRoIiA6ICJib3JkZXI6IDFweCBzb2xpZCAjZGRkO3BhZGRpbmc6IDhweDt0ZXh0LWFsaWduOiBsZWZ0O3doaXRlLXNwYWNlOiBub3dyYXA7b3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7dG9wOiAwO3otaW5kZXg6IDE7IiwKICAgICJ0ZCIgOiAiYm9yZGVyOiAxcHggc29saWQgI2RkZDtwYWRkaW5nOjhweDt0ZXh0LWFsaWduOiBsZWZ0O3doaXRlLXNwYWNlOiBub3dyYXA7b3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsiLAogICAgInVpX25vbGFiZWxfdGQiIDogImJvcmRlcjogMXB4IHNvbGlkICNkZGQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzozcHg7aGVpZ2h0OjQxcHg7d2hpdGUtc3BhY2U6IG5vd3JhcDttaW5fd2lkdGg6MTAwcHg7IiwKICAgICJ1aV9jb250YWluZXJfdGQiIDogImJvcmRlcjogMXB4IHNvbGlkICNkZGQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzozcHg7bWF4LWhlaWdodDo3MHB4O3doaXRlLXNwYWNlOiBub3dyYXA7bWluX3dpZHRoOjEwMHB4OyIsCiAgICAiYnV0dG9uIiA6ICJiYWNrZ3JvdW5kLWNvbG9yOnJnYigxMjEsIDE4OCwgMjI5KTtjb2xvcjp3aGl0ZTsiCn0KCmRlZiBkZl90b191aV90YWJsZShkZixoZWlnaHQsaW5kZXhfY29uPUZhbHNlKToKICAgIHJldHVybiB1aS5kaXYoCiAgICAgICAgICAgIHVpLnRhZ3MudGFibGUoCiAgICAgICAgICAgICAgICB1aS50YWdzLnRoZWFkKAogICAgICAgICAgICAgICAgICAgIHVpLnRhZ3MudHIoCiAgICAgICAgICAgICAgICAgICAgICAgICpbdWkudGFncy50aChpLHN0eWxlPXN0eWxlc1sidGgiXSkgZm9yIGkgaW4gbGlzdChkZi5pbmRleC5uYW1lcyBpZiBpbmRleF9jb24gZWxzZSBbXSkrbGlzdChkZi5jb2x1bW5zKV0pCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgdWkudGFncy50Ym9keSgKICAgICAgICAgICAgICAgICAgICAqW3VpLnRhZ3MudHIoKlt1aS50YWdzLnRkKHN0cihqKSxzdHlsZT1zdHlsZXNbInRkIl0pIGZvciBqIGluIChsaXN0KGkgaWYgaXNpbnN0YW5jZShpLHR1cGxlKSBlbHNlIFtpXSkgaWYgaW5kZXhfY29uIGVsc2UgW10pK2RmLmxvY1tpLDpdLnRvX2xpc3QoKV0pIGZvciBpIGluIGRmLmluZGV4XQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHN0eWxlID0gc3R5bGVzWyJ0YWJsZSJdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1sidGFibGVfY29udGFpbmVyX2RpdiJdLmZvcm1hdChoZWlnaHQpICAgCiAgICAgICAgKQoKZGVmIGRhdGFfc3VtbWFyeShkYXRhKToKICAgIGRlZiDnvLrlpLHlgLwoeCk6CiAgICAgICAgcmV0dXJuIHguaXNudWxsKCkuc3VtKCkKICAgIGRlZiDnvLrlpLHmr5TkvosoeSk6CiAgICAgICAgcmV0dXJuIGYie3JvdW5kKHkuaXNudWxsKCkuc3VtKCkvbGVuKHkpLDIpKjEwMH0lIgogICAgZGVmIOaVsOaNruexu+Weiyh6KToKICAgICAgICByZXR1cm4gei5kdHlwZXMKICAgIGRmMSA9IHBkLkRhdGFGcmFtZShbWyLooYzmlbAiLGRhdGEuc2hhcGVbMF1dLFsi5YiX5pWwIixkYXRhLnNoYXBlWzFdXSxbJ+mHjeWkjeaVsCcsZGF0YS5kdXBsaWNhdGVkKCkuc3VtKCldXSkKICAgIGRmID0gZGF0YS5hZ2coW+e8uuWkseWAvCznvLrlpLHmr5Tkvoss5pWw5o2u57G75Z6LXSkuVC5yZXNldF9pbmRleChuYW1lcz0i5a2X5q61IikKICAgIHN1bW1hcnlfaW5mbyA9IHVpLmRpdigKICAgICAgICAgICAgICAgICAgICAgICAgdWkudGFncy50YWJsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICpbdWkudGFncy50cigqW3VpLnRhZ3MudGQoc3RyKGopLHN0eWxlPXN0eWxlc1sidGQiXSkgZm9yIGogaW4gZGYxLmxvY1tpLDpdXSkgZm9yIGkgaW4gZGYxLmluZGV4XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gc3R5bGVzWyJ0YWJsZSJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1sidGFibGVfY29udGFpbmVyX2RpdiJdLmZvcm1hdCgxMzApCiAgICAgICAgICAgICAgICApCiAgICByZXR1cm4gdWkuZGl2KHN1bW1hcnlfaW5mbyxkZl90b191aV90YWJsZShkZiwzNTApKQoKZGVmIHVpX3RhYmxlKGNvbF9udW0saGVpZ2h0PTMwMCwqdGFnY2hpbGQpOgogICAgcm93LG1vZCA9IGRpdm1vZChsZW4odGFnY2hpbGQpLGNvbF9udW0pCiAgICByZXR1cm4gdWkuZGl2KAogICAgICAgICAgICAgICAgdWkudGFncy50YWJsZSgKICAgICAgICAgICAgICAgICAgICAqW3VpLnRhZ3MudHIodWkudGFncy50ZCh0YWdjaGlsZFsyKnJdWzBdLHRhZ2NoaWxkWzIqcl1bMV0sc3R5bGU9c3R5bGVzWyJ1aV9jb250YWluZXJfdGQiXSksdWkudGFncy50ZCh0YWdjaGlsZFsyKnIrMV1bMF0sdGFnY2hpbGRbMipyKzFdWzFdLHN0eWxlPXN0eWxlc1sidWlfY29udGFpbmVyX3RkIl0pKSBmb3IgciBpbiByYW5nZShyb3cpXSwKICAgICAgICAgICAgICAgICAgICB1aS50YWdzLnRyKCpbdWkudGFncy50ZCh1WzBdLHVbMV0sc3R5bGU9c3R5bGVzWyJ1aV9jb250YWluZXJfdGQiXSkgZm9yIHUgaW4gdGFnY2hpbGRbLW1vZDpdXSkgaWYgbW9kID4gMCBlbHNlIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBzdHlsZXNbInRhYmxlIl0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc3R5bGUgPSBzdHlsZXNbInRhYmxlX2NvbnRhaW5lcl9kaXYiXS5mb3JtYXQoaGVpZ2h0KQogICAgICAgICAgICApLAoKZGltZW5zaW9uX2Rlc2NyaWJlX2hlaWdodCA9IDMwMApkaW1lbnNpb25fdmFsdWVfY291bnRfaGVpZ2h0ID0gMjAwCnZhbHVlX2Rlc2NyaWJlX2hlaWdodCA9IDIwMAp2YWx1ZV9wbG90X2hlaWdodCA9ICIyMDBweCIKCmFwcF91aSA9IHVpLnBhZ2VfZmx1aWQoCiAgICB1aS5yb3coCiAgICAgICAgdWkuY29sdW1uKAogICAgICAgICAgICA0LAogICAgICAgICAgICB1aS5uYXZzZXRfdGFiX2NhcmQoCiAgICAgICAgICAgICAgICB1aS5uYXYoCiAgICAgICAgICAgICAgICAgICAgIuaVsOaNrua6kCIsCiAgICAgICAgICAgICAgICAgICAgdWkuaW5wdXRfZmlsZSgiZGF0YSIsIuWvvOWFpeaVsOaNriIsYWNjZXB0PVsiLmNzdiIsIi54bHN4Il0scGxhY2Vob2xkZXI9IumAieaLqWNzduaIlmV4Y2Vs5paH5Lu2IixtdWx0aXBsZT1UcnVlKSwKICAgICAgICAgICAgICAgICAgICB1aS5uYXZzZXRfdGFiKAogICAgICAgICAgICAgICAgICAgICAgICB1aS5uYXYoIuaAu+S9kyIsdWkub3V0cHV0X3VpKCJpbmZvX3BvcCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdWkubmF2KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIue7tOW6piIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoImRpbWVuc2lvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkub3V0cHV0X3VpKCJpbmZvX2RpbWVuc2lvbiIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdWkubmF2KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIuW6pumHjyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoInZhbHVlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoImluZm9fdmFsdWUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF9wbG90KCJwbG90X3ZhbHVlIixoZWlnaHQ9dmFsdWVfcGxvdF9oZWlnaHQpKSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB1aS5uYXYoCiAgICAgICAgICAgICAgICAgICAgIuaVsOaNrua4hea0lyIsCiAgICAgICAgICAgICAgICAgICAgdWkuY29sdW1uKAogICAgICAgICAgICAgICAgICAgICAgICAxMiwKICAgICAgICAgICAgICAgICAgICAgICAgdWkubmF2c2V0X3RhYigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm5hdigi57G75Z6L6L2s5o2iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoImZpZWxkX2R0eXBlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5pbnB1dF9hY3Rpb25fYnV0dG9uKCJjaGFuZ2VkdHlwZSIsIuaUueWPmOexu+WeiyIsc3R5bGU9c3R5bGVzWyJidXR0b24iXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9ICJoZWlnaHQ6NjAwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm5hdigi57y65aSx5YC85aSE55CGIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF91aSgiZmllbGRfbmEiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gImhlaWdodDo2MDBweCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICksICAgICAgIAogICAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgdWkuY29sdW1uKAogICAgICAgICAgICA4LAogICAgICAgICAgICB1aS5yb3coCiAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgIDUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF91aSgiY3JlYXRlX2dyYXBoX3VpIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gImhlaWdodDozMTBweCIKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgIDcsCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF9wbG90KCJzaG93X2dyYXBoIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gImhlaWdodDozMTBweCIKICAgICAgICAgICAgICAgICkKICAgICksCiAgICAgICAgICAgIHVpLnJvdygKICAgICAgICAgICAgICAgIHVpLm5hdnNldF90YWJfY2FyZCgKICAgICAgICAgICAgICAgICAgICB1aS5uYXYoIuaVsOaNriIsdWkub3V0cHV0X3VpKCJzaG93X2RhdGEiKSksCiAgICAgICAgICAgICAgICAgICAgdWkubmF2KCLooajov57mjqUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5yb3coCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkuY29sdW1uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF91aSgiY3JlYXRlX21lcmdlX3VpIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9ICJoZWlnaHQ6MzUwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkub3V0cHV0X3VpKCJzaG93X21lcmdlX2RhdGEiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gImhlaWdodDozNTBweCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHVpLm5hdigi6YCP6KeG6KGoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkucm93KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLmNvbHVtbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoImNyZWF0ZV9waXZvdF91aSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSAiaGVpZ2h0OjM1MHB4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkuY29sdW1uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLm91dHB1dF91aSgic2hvd19waXZvdF9kYXRhIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9ICJoZWlnaHQ6MzUwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgdWkubmF2KCJncm91cGJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkucm93KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLmNvbHVtbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5vdXRwdXRfdWkoImNyZWF0ZV9ncm91cGJ5X3VpIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9ICJoZWlnaHQ6MzUwcHgiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5jb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkub3V0cHV0X3VpKCJzaG93X2dyb3VwYnlfZGF0YSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSAiaGVpZ2h0OjM1MHB4IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICApICAgICAgICAKKQoKZGVmIHNlcnZlcihpbnB1dCxvdXRwdXQsc2Vzc2lvbik6CiAgICBtZXJnZV9kYXRhID0gcmVhY3RpdmUuVmFsdWUoe30pCiAgICBwaXZvdF9kYXRhID0gcmVhY3RpdmUuVmFsdWUoe30pCiAgICBncm91cGJ5X2RhdGEgPSByZWFjdGl2ZS5WYWx1ZSh7fSkKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyAg5pWw5o2u5a+85YWl5ZGI546w5qih5Z2XICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAjIyDlr7zlhaXmlbDmja7vvIzmlbDmja7kv53mjIHkuLpjYWxj54q25oCBLOi/lOWbnuaVsOaNruS4um5hbWU6ZGF0YeeahOWtl+WFuOW9ouW8jwogICAgQHJlYWN0aXZlLkNhbGMKICAgIGRlZiBnZXRfZGF0YSgpOgogICAgICAgIGlmIGlucHV0LmRhdGEoKToKICAgICAgICAgICAgbmFtZV9kYXRhID0ge2lbIm5hbWUiXS5yZXBsYWNlKCIuY3N2IiwiIikgaWYgaVsibmFtZSJdLmVuZHN3aXRoKCIuY3N2IikgZWxzZSBpWyJuYW1lIl0ucmVwbGFjZSgiLnhsc3giLCIiKSA6IHBkLnJlYWRfY3N2KGlbImRhdGFwYXRoIl0pIGlmIGlbIm5hbWUiXS5lbmRzd2l0aCgiLmNzdiIpIGVsc2UgcGQucmVhZF9leGNlbChpWyJkYXRhcGF0aCJdKSBmb3IgaSBpbiBpbnB1dC5kYXRhKCl9CiAgICAgICAgICAgIHJldHVybiBuYW1lX2RhdGEKCiAgICAjIyDojrflj5blvZPliY3moIfnrb7pobXmlbDmja4gICAgCiAgICBAcmVhY3RpdmUuQ2FsYwogICAgZGVmIHNlbGVjdGVkX2RhdGEoKToKICAgICAgICBpZiBpbnB1dC5kYXRhKCk6CiAgICAgICAgICAgIGlmIGlucHV0LmRhdGFuYW1lKCkgaW4gZ2V0X2RhdGEoKS5rZXlzKCk6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0X2RhdGEoKVtpbnB1dC5kYXRhbmFtZSgpXQoKICAgICMjIOS7peagh+etvumhteWxleekuuaJgOacieaVsOaNrgogICAgQG91dHB1dAogICAgQHJlbmRlci51aQogICAgZGVmIHNob3dfZGF0YSgpOgogICAgICAgIGlmIGlucHV0LmRhdGEoKToKICAgICAgICAgICAgZHMgPSBnZXRfZGF0YSgpCiAgICAgICAgICAgIHJldHVybiB1aS5uYXZzZXRfdGFiKAogICAgICAgICAgICAgICAgICAgICpbdWkubmF2KGssZGZfdG9fdWlfdGFibGUodi5oZWFkKDEwMCksMzAwKSkgZm9yIGssdiBpbiBkcy5pdGVtcygpXSwKICAgICAgICAgICAgICAgICAgICBpZD0iZGF0YW5hbWUiCiAgICAgICAgICAgICAgICApCgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyDmlbDmja7kv6Hmga/lkYjnjrAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICMjIOWxleekuuaxh+aAu+S/oeaBrwogICAgQG91dHB1dAogICAgQHJlbmRlci51aQogICAgZGVmIGluZm9fcG9wKCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxlY3RlZF9kYXRhKCksIHBkLkRhdGFGcmFtZSk6CiAgICAgICAgICAgIHJldHVybiBkYXRhX3N1bW1hcnkoc2VsZWN0ZWRfZGF0YSgpKQogICAgCiAgICAjIyDnu7TluqblrZfmrrUKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBkaW1lbnNpb24oKToKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdGVkX2RhdGEoKSwgcGQuRGF0YUZyYW1lKToKICAgICAgICAgICAgcmV0dXJuIHVpLmlucHV0X3NlbGVjdGl6ZSgiZG0iLCLluqbph48iLGNob2ljZXM9bGlzdChzZWxlY3RlZF9kYXRhKCkuc2VsZWN0X2R0eXBlcyhleGNsdWRlPVsibnVtYmVyIl0pLmNvbHVtbnMpKQogICAgCiAgICAjIyDlsZXnpLrnu7Tluqbkv6Hmga8KICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBpbmZvX2RpbWVuc2lvbigpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZWN0ZWRfZGF0YSgpLCBwZC5EYXRhRnJhbWUpOgogICAgICAgICAgICBpZiAoYm9vbChpbnB1dC5kbSgpKSkmKGlucHV0LmRtKCkgaW4gc2VsZWN0ZWRfZGF0YSgpLmNvbHVtbnMpOgogICAgICAgICAgICAgICAgZGF0YSA9IHNlbGVjdGVkX2RhdGEoKVtbaW5wdXQuZG0oKV1dCiAgICAgICAgICAgICAgICByZXR1cm4gdWkuZGl2KAogICAgICAgICAgICAgICAgICAgIGRhdGEuZGVzY3JpYmUoKS5yZXNldF9pbmRleChuYW1lcz0i5oyH5qCHIikucGlwZShkZl90b191aV90YWJsZSxkaW1lbnNpb25fZGVzY3JpYmVfaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICBkYXRhLnZhbHVlX2NvdW50cygpLnRvX2ZyYW1lKCkucmVzZXRfaW5kZXgobmFtZXM9IuWPluWAvCIpLnBpcGUoZGZfdG9fdWlfdGFibGUsZGltZW5zaW9uX3ZhbHVlX2NvdW50X2hlaWdodCkpIAoKICAgICMjIOW6pumHj+Wtl+autQogICAgQG91dHB1dAogICAgQHJlbmRlci51aQogICAgZGVmIHZhbHVlKCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxlY3RlZF9kYXRhKCksIHBkLkRhdGFGcmFtZSk6CiAgICAgICAgICAgIHJldHVybiB1aS5pbnB1dF9zZWxlY3RpemUoInZsIiwi5bqm6YePIixjaG9pY2VzPWxpc3Qoc2VsZWN0ZWRfZGF0YSgpLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT1bIm51bWJlciJdKS5jb2x1bW5zKSkKICAgIAogICAgIyMg5bGV56S65bqm6YeP5L+h5oGvCiAgICBAb3V0cHV0CiAgICBAcmVuZGVyLnVpCiAgICBkZWYgaW5mb192YWx1ZSgpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZWN0ZWRfZGF0YSgpLCBwZC5EYXRhRnJhbWUpOgogICAgICAgICAgICBpZiAoYm9vbChpbnB1dC52bCgpKSkmKGlucHV0LnZsKCkgaW4gc2VsZWN0ZWRfZGF0YSgpLmNvbHVtbnMpOgogICAgICAgICAgICAgICAgZGF0YSA9IHNlbGVjdGVkX2RhdGEoKVtbaW5wdXQudmwoKV1dCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5kZXNjcmliZSgpLnJlc2V0X2luZGV4KG5hbWVzPSLmjIfmoIciKS5waXBlKGRmX3RvX3VpX3RhYmxlLHZhbHVlX2Rlc2NyaWJlX2hlaWdodCkKCiAgICAjIyDlsZXnpLrluqbph4/liIbluIMKICAgIEBvdXRwdXQKICAgIEByZW5kZXIucGxvdAogICAgZGVmIHBsb3RfdmFsdWUoKToKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdGVkX2RhdGEoKSwgcGQuRGF0YUZyYW1lKToKICAgICAgICAgICAgaWYgKGJvb2woaW5wdXQudmwoKSkpJihpbnB1dC52bCgpIGluIHNlbGVjdGVkX2RhdGEoKS5jb2x1bW5zKToKICAgICAgICAgICAgICAgIGRhdGEgPSBzZWxlY3RlZF9kYXRhKClbaW5wdXQudmwoKV0KICAgICAgICAgICAgICAgIGZpZyxheCA9IHBsdC5zdWJwbG90cygxLDEpCiAgICAgICAgICAgICAgICBheC5oaXN0KAogICAgICAgICAgICAgICAgeD1kYXRhLAogICAgICAgICAgICAgICAgIyPnrrHlrZDmlbAoYmlucynorr7nva7vvIzku6XkuIvkuInnp43kuI3og73lkIzml7blubblrZgKICAgICAgICAgICAgICAgICNiaW5zPTIwLCNkZWZhdWx0OiAxMAogICAgICAgICAgICAgICAgI2JpbnM9WzQsNiw4XSwj5YiG5Lik5Liq566x5a2Q77yM6L6555WM5YiG5Yir5Li6WzQsNiksWzYsOF0KICAgICAgICAgICAgICAgIGJpbnM9J2F1dG8nLCMg5Y+v6YCJJ2F1dG8nLCAnZmQnLCAnZG9hbmUnLCAnc2NvdHQnLCAnc3RvbmUnLCAncmljZScsICdzdHVyZ2VzJywgb3IgJ3NxcnQnLgogICAgICAgICAgICAgICAgI+mAieaLqeacgOWQiOmAgueahGJpbuWuve+8jOe7mOWItuS4gOS4quacgOiDveWPjeaYoOaVsOaNrumikeeOh+WIhuW4g+eahOebtOaWueWbviAKCiAgICAgICAgICAgICAgICAjcmFuZ2U9KDUsNyksI+acgOW3pui+ueWSjOacgOWPs+i+ueeuseWtkOi+ueeVjO+8jOS4jeaMh+WumuaXtu+8jOS4uih4Lm1pbigpLCB4Lm1heCgpKQogICAgICAgICAgICAgICAgZGVuc2l0eT1UcnVlLCAj6buY6K6k5Li6RmFsc2XvvIx56L205pi+56S66aKR5pWw77yb5Li6VHJ1ZSB56L205pi+56S66aKR546H77yM6aKR546H57uf6K6h57uT5p6cPeivpeWMuumXtOmikeaVsC8oeOS4reaAu+agt+acrOaVsCror6XljLrpl7Tlrr3luqYpCiAgICAgICAgICAgICAgICAjd2VpZ2h0cz1ucC5yYW5kb20ucmFuZChsZW4oeCkpLCPlr7l45Lit5q+P5LiA5Liq5qC35pys6K6+572u5p2D6YeN77yM6L+Z6YeM6ZqP5py66K6+572u5LqG5p2D6YeNCiAgICAgICAgICAgICAgICBjdW11bGF0aXZlPUZhbHNlLCPpu5jorqRGYWxzZe+8jOaYr+WQpue0r+WKoOmikeaVsOaIluiAhemikeeOh++8jOWPiuWQjumdouS4gOS4quafseWtkOaYr+WJjemdouaJgOacieafseWtkOeahOe0r+WKoAogICAgICAgICAgICAgICAgYm90dG9tPTAsI+iuvue9rueuseWtkHnovbTmlrnlkJHln7rnur/vvIzpu5jorqTkuLow77yM566x5a2Q6auY5bqmPWJvdHRvbSB0byBib3R0b20gKyBoaXN0KHgsIGJpbnMpCiAgICAgICAgICAgICAgICBoaXN0dHlwZT0nYmFyJywj55u05pa55Zu+55qE57G75Z6L6buY6K6k5Li6YmFyeydiYXInLCAnYmFyc3RhY2tlZCcsICdzdGVwJywgJ3N0ZXBmaWxsZWQnfQogICAgICAgICAgICAgICAgYWxpZ249J21pZCcsI+euseWtkOi+ueeVjOWAvOeahOWvuem9kOaWueW8j++8jOm7mOiupOS4um1pZHsnbGVmdCcsICdtaWQnLCAncmlnaHQnfQogICAgICAgICAgICAgICAgb3JpZW50YXRpb249J3ZlcnRpY2FsJywj566x5a2Q5rC05bmz6L+Y5piv5Z6C55u05pi+56S677yM6buY6K6k5Z6C55u05pi+56S6KCd2ZXJ0aWNhbCcp77yM5Y+v6YCJJ2hvcml6b250YWwnCiAgICAgICAgICAgICAgICByd2lkdGg9MS4wLCPmr4/kuKrnrrHlrZDlrr3luqbvvIzpu5jorqTkuLox77yM5q2k5pe25pi+56S6NTAlCiAgICAgICAgICAgICAgICBsb2c9RmFsc2UsI3novbTmlbDmja7mmK/lkKblj5blr7nmlbDvvIzpu5jorqTkuI3lj5blr7nmlbDkuLpGYWxzZQogICAgICAgICAgICAgICAgbGFiZWw9aW5wdXQudmwoKSwj5Zu+5L6LCiAgICAgICAgICAgICAgICAjbm9ybWVkPTAsI+WKn+iDveWSjGRlbnNpdHnkuIDmoLfvvIzkuozogIXkuI3og73lkIzml7bkvb/nlKgKICAgICAgICAgICAgICAgIGZhY2Vjb2xvcj0nYmx1ZScsI+euseWtkOminOiJsiAKICAgICAgICAgICAgICAgIGVkZ2Vjb2xvcj0iYmxhY2siLCPnrrHlrZDovrnmoYbpopzoibIKICAgICAgICAgICAgICAgIHN0YWNrZWQ9RmFsc2UsI+Wkmue7hOaVsOaNruaYr+WQpuWghuWPoAogICAgICAgICAgICAgICAgYWxwaGE9MC41I+euseWtkOmAj+aYjuW6pgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmV0dXJuIGZpZwoKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyDmlbDmja7muIXmtJcgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAjIOWxleekuuaVsOaNruexu+Wei+W5tuS4lOWPr+abtOaUuQogICAgQG91dHB1dAogICAgQHJlbmRlci51aQogICAgZGVmIGZpZWxkX2R0eXBlKCk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShzZWxlY3RlZF9kYXRhKCksIHBkLkRhdGFGcmFtZSk6CiAgICAgICAgICAgIGQxID0gc2VsZWN0ZWRfZGF0YSgpLmR0eXBlcy5yZXNldF9pbmRleCgpCiAgICAgICAgICAgIGQxLmNvbHVtbnMgPSBbIuWtl+autSIsIuaVsOaNruexu+WeiyJdCiAgICAgICAgICAgIGR0eXBlX2luZm8gPSB1aS5kaXYoCiAgICAgICAgICAgIHVpLnRhZ3MudGFibGUoCiAgICAgICAgICAgICAgICB1aS50YWdzLnRoZWFkKAogICAgICAgICAgICAgICAgICAgIHVpLnRhZ3MudHIoCiAgICAgICAgICAgICAgICAgICAgICAgIHVpLnRhZ3MudGgoIuWtl+autSIsc3R5bGU9c3R5bGVzWyJ0aCJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgdWkudGFncy50aCgi5pWw5o2u57G75Z6LIixzdHlsZT1zdHlsZXNbInRoIl0rIndpZHRoOjEwMHB4OyIpI+WSjOS4i+mdoueahHVp55qEd2lkdGjkv53mjIHkuIDoh7TjgIIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHVpLnRhZ3MudGJvZHkoCiAgICAgICAgICAgICAgICAqW3VpLnRhZ3MudHIoCiAgICAgICAgICAgICAgICAgICAgdWkudGFncy50ZChkMS5sb2NbaSwi5a2X5q61Il0sc3R5bGU9c3R5bGVzWyJ0ZCJdKSwKICAgICAgICAgICAgICAgICAgICB1aS50YWdzLnRkKHVpLmlucHV0X3NlbGVjdGl6ZShkMS5sb2NbaSwi5a2X5q61Il0rImR0eXBlIixOb25lLGNob2ljZXM9WyJpbnQzMiIsImludDY0IiwibnVtYmVyIiwib2JqZWN0Iiwic3RyaW5nIiwiYm9vbCIsImRhdGV0aW1lNjQiLCJmbG9hdDY0Il0sc2VsZWN0ZWQ9ZDEubG9jW2ksIuaVsOaNruexu+WeiyJdLHdpZHRoPSIxMDBweCIpLHN0eWxlPXN0eWxlc1sidWlfbm9sYWJlbF90ZCJdKQogICAgICAgICAgICAgICAgICAgICkgZm9yIGkgaW4gZDEuaW5kZXhdLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1sidGFibGUiXQogICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc3R5bGUgPSBzdHlsZXNbInRhYmxlX2NvbnRhaW5lcl9kaXYiXS5mb3JtYXQoNTUwKQogICAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBkdHlwZV9pbmZvCgogICAgIyDlsZXnpLrnvLrlpLHnsbvlnovlubbkuJTlj6/mm7TmlLkKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBmaWVsZF9uYSgpOgogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZWN0ZWRfZGF0YSgpLCBwZC5EYXRhRnJhbWUpOgogICAgICAgICAgICBkMSA9IHNlbGVjdGVkX2RhdGEoKS5hcHBseShsYW1iZGEgeTpmIntyb3VuZCh5LmlzbnVsbCgpLnN1bSgpL2xlbih5KSwyKSoxMDB9JSIpLnJlc2V0X2luZGV4KCkKICAgICAgICAgICAgZDEuY29sdW1ucyA9IFsi5a2X5q61Iiwi57y65aSx5q+U5L6LIl0KICAgICAgICAgICAgZDEgPSBkMVtkMVsi57y65aSx5q+U5L6LIl0uc3RyLnJlcGxhY2UoIiUiLCIiKS5tYXAoZmxvYXQpPjBdLnNvcnRfdmFsdWVzKGJ5PSLnvLrlpLHmr5TkvosiLGtleSA9IGxhbWJkYSB4OiB4LnN0ci5yZXBsYWNlKCIlIiwiIikubWFwKGZsb2F0KSxhc2NlbmRpbmc9RmFsc2UpCiAgICAgICAgICAgIHJldHVybiAgdWkuZGl2KAogICAgICAgICAgICB1aS50YWdzLnRhYmxlKAogICAgICAgICAgICAgICAgdWkudGFncy50aGVhZCgKICAgICAgICAgICAgICAgICAgICB1aS50YWdzLnRyKAogICAgICAgICAgICAgICAgICAgICAgICAqW3VpLnRhZ3MudGgoaSxzdHlsZT1zdHlsZXNbInRoIl0pIGZvciBpIGluIGQxLmNvbHVtbnNdLAogICAgICAgICAgICAgICAgICAgICAgICB1aS50YWdzLnRoKCLlpITnkIbnvLrlpLHlgLwiLHN0eWxlPXN0eWxlc1sidGgiXSsid2lkdGg6MTAwcHg7Iikj5ZKM5LiL6Z2i5L+d5oyB5LiA6Ie0CiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB1aS50YWdzLnRib2R5KAogICAgICAgICAgICAgICAgKlt1aS50YWdzLnRyKAogICAgICAgICAgICAgICAgICAgIHVpLnRhZ3MudGQoZDEubG9jW2ksIuWtl+autSJdLHN0eWxlPXN0eWxlc1sidGQiXSksCiAgICAgICAgICAgICAgICAgICAgdWkudGFncy50ZChkMS5sb2NbaSwi57y65aSx5q+U5L6LIl0sc3R5bGU9c3R5bGVzWyJ0ZCJdKSwKICAgICAgICAgICAgICAgICAgICB1aS50YWdzLnRkKHVpLmlucHV0X3NlbGVjdGl6ZShkMS5sb2NbaSwi5a2X5q61Il0rIm5hIixOb25lLGNob2ljZXM9WyIiXSxzZWxlY3RlZD0iIix3aWR0aD0iMTAwcHgiKSxzdHlsZT1zdHlsZXNbInVpX25vbGFiZWxfdGQiXSkKICAgICAgICAgICAgICAgICAgICApIGZvciBpIGluIGQxLmluZGV4XSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBzdHlsZXNbInRhYmxlIl0KICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHN0eWxlID0gc3R5bGVzWyJ0YWJsZV9jb250YWluZXJfZGl2Il0uZm9ybWF0KDU5MCkKICAgICAgICAgICAgKQogICAgICAgIAogICAgIyDkv67mlLnmlbDmja7nsbvlnosgICAKICAgIEByZWFjdGl2ZS5FZmZlY3QKICAgIEByZWFjdGl2ZS5ldmVudChpbnB1dC5jaGFuZ2VkdHlwZSkKICAgIGRlZiBjaGFuZ2VfZmllbGRfZHR5cGUoKToKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGVjdGVkX2RhdGEoKSwgcGQuRGF0YUZyYW1lKToKICAgICAgICAgICAgZm9yIGNvbCBpbiBzZWxlY3RlZF9kYXRhKCkuY29sdW1uczoKICAgICAgICAgICAgICAgICMg5rOo5oSP5LiL6Z2i5LiN6IO95YaZZXZhbCgiaW5wdXQuIitjb2wrImR0eXBlKCkiKSxpbnB1dOS8mum7mOiupOS4uuWGhee9ruWHveaVsAogICAgICAgICAgICAgICAgaWYgc2VsZWN0ZWRfZGF0YSgpW2NvbF0uZHR5cGVzICE9IGlucHV0W2NvbCsiZHR5cGUiXSgpOgogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkX2RhdGEoKS5sb2NbOixjb2xdID0gc2VsZWN0ZWRfZGF0YSgpW2NvbF0uYXN0eXBlKGlucHV0W2NvbCsiZHR5cGUiXSgpKQogICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJkbSIsbGFiZWw9Iue7tOW6piIsY2hvaWNlcz1saXN0KHNlbGVjdGVkX2RhdGEoKS5zZWxlY3RfZHR5cGVzKGV4Y2x1ZGU9WyJudW1iZXIiXSkuY29sdW1ucykpCiAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoInZsIixsYWJlbD0i5bqm6YePIixjaG9pY2VzPWxpc3Qoc2VsZWN0ZWRfZGF0YSgpLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT1bIm51bWJlciJdKS5jb2x1bW5zKSkKCiAgICAjIOS/ruaUuee8uuWkseexu+WeiwoKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIG1lcmdlX2RhdGEgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICMg5Yib5bu66L+e5o6l6KGo55qEdWkKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBjcmVhdGVfbWVyZ2VfdWkoKToKICAgICAgICBpZiBnZXRfZGF0YSgpOgogICAgICAgICAgICByZXR1cm4gdWlfdGFibGUoCiAgICAgICAgICAgICAgICAgICAgICAgIDIsMzQwLCAgCiAgICAgICAgICAgICAgICAgICAgICAgIFsi5bem6L+e5o6l6KGoIiAsIHVpLmlucHV0X3NlbGVjdGl6ZSgidGFibGVfbGVmdCIsTm9uZSx3aWR0aD0iMTUwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPVtrIGZvciBrIGluIGdldF9kYXRhKCkua2V5cygpXSxzZWxlY3RlZD1Ob25lKV0sCiAgICAgICAgICAgICAgICAgICAgICAgIFsi5Y+z6L+e5o6l6KGoIiAsIHVpLmlucHV0X3NlbGVjdGl6ZSgidGFibGVfcmlnaHQiLE5vbmUsd2lkdGg9IjE1MHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcz1bayBmb3IgayBpbiBnZXRfZGF0YSgpLmtleXMoKV0sc2VsZWN0ZWQ9Tm9uZSldLAogICAgICAgICAgICAgICAgICAgICAgICBbIuW3pui/nuaOpeWIlyIgLCB1aS5pbnB1dF9zZWxlY3RpemUoImxlZnRfb25fY29sIixOb25lLFtdLG11bHRpcGxlPVRydWUsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgICAgICBbIuWPs+i/nuaOpeWIlyIgLCB1aS5pbnB1dF9zZWxlY3RpemUoInJpZ2h0X29uX2NvbCIsTm9uZSxbXSxtdWx0aXBsZT1UcnVlLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgWyLlt6bkv53nlZnliJciICwgdWkuaW5wdXRfc2VsZWN0aXplKCJsZWZ0X3NhdmVfY29sIixOb25lLFtdLG11bHRpcGxlPVRydWUsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgICAgICBbIuWPs+S/neeVmeWIlyIgLCB1aS5pbnB1dF9zZWxlY3RpemUoInJpZ2h0X3NhdmVfY29sIixOb25lLFtdLG11bHRpcGxlPVRydWUsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgICAgICBbIui/nuaOpeaWueW8jyIgLCB1aS5pbnB1dF9zZWxlY3RpemUoIm1lcmdlX3dheSIsTm9uZSx3aWR0aD0iMTUwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzPVsibGVmdCIsInJpZ2h0Iiwib3V0ZXIiLCJpbm5lciIsImNyb3NzIl0pXSwKICAgICAgICAgICAgICAgICAgICAgICAgWyLooajlkI0iICwgdWkuaW5wdXRfdGV4dCgibWVyZ2VfdGFibGVfbmFtZSIsTm9uZSwiIix3aWR0aD0iMTUwcHgiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgIFsiIix1aS5pbnB1dF9hY3Rpb25fYnV0dG9uKCJjb2RfbWVyZ2VfdGFibGVfYnV0dG9uIiwi5aKe5Yig6KGo5qC8IixzdHlsZT1zdHlsZXNbImJ1dHRvbiJdLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgICAgICAgICAgICAgWyLpgInmi6nliKDpmaTooajmoLwiLHVpLmlucHV0X3NlbGVjdGl6ZSgiZGVsZXRlX21lcmdlX25hbWUiLE5vbmUsW10sbXVsdGlwbGU9VHJ1ZSx3aWR0aD0iMTUwcHgiKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAjIOagueaNruihqOabtOaWsOWtl+autQogICAgQHJlYWN0aXZlLkVmZmVjdAogICAgZGVmIF8oKToKICAgICAgICBpZiBpc2luc3RhbmNlKGdldF9kYXRhKCksZGljdCk6CiAgICAgICAgICAgIGlmIChib29sKGlucHV0LnRhYmxlX2xlZnQoKSkpJihpbnB1dC50YWJsZV9sZWZ0KCkgaW4gbGlzdChnZXRfZGF0YSgpLmtleXMoKSkpOgogICAgICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgibGVmdF9vbl9jb2wiLGxhYmVsPU5vbmUsY2hvaWNlcz1saXN0KGdldF9kYXRhKClbaW5wdXQudGFibGVfbGVmdCgpXS5jb2x1bW5zKSkKICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImxlZnRfc2F2ZV9jb2wiLGxhYmVsPU5vbmUsY2hvaWNlcz1saXN0KGdldF9kYXRhKClbaW5wdXQudGFibGVfbGVmdCgpXS5jb2x1bW5zKSkKICAgICAgICAgICAgaWYgKGJvb2woaW5wdXQudGFibGVfcmlnaHQoKSkpJihpbnB1dC50YWJsZV9yaWdodCgpIGluIGxpc3QoZ2V0X2RhdGEoKS5rZXlzKCkpKToKICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoInJpZ2h0X29uX2NvbCIsbGFiZWw9Tm9uZSxjaG9pY2VzPWxpc3QoZ2V0X2RhdGEoKVtpbnB1dC50YWJsZV9yaWdodCgpXS5jb2x1bW5zKSkKICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoInJpZ2h0X3NhdmVfY29sIixsYWJlbD1Ob25lLGNob2ljZXM9bGlzdChnZXRfZGF0YSgpW2lucHV0LnRhYmxlX3JpZ2h0KCldLmNvbHVtbnMpKSAgIAoKICAgICMg5pu05pawbWVyZ2XmlbDmja4KICAgIEByZWFjdGl2ZS5FZmZlY3QKICAgIEByZWFjdGl2ZS5ldmVudChpbnB1dC5jb2RfbWVyZ2VfdGFibGVfYnV0dG9uKQogICAgZGVmIHVwZGF0ZV9tZXJnZV9kYXRhKCk6CiAgICAgICAgaWYgbm90IGJvb2woaW5wdXQuZGVsZXRlX21lcmdlX25hbWUoKSk6CiAgICAgICAgICAgIGRhdGEgPSBwZC5tZXJnZSgKICAgICAgICAgICAgICAgIGxlZnQ9Z2V0X2RhdGEoKVtpbnB1dC50YWJsZV9sZWZ0KCldLAogICAgICAgICAgICAgICAgcmlnaHQ9Z2V0X2RhdGEoKVtpbnB1dC50YWJsZV9yaWdodCgpXSwKICAgICAgICAgICAgICAgIG9uID0gTm9uZSBpZiBsaXN0KGlucHV0LmxlZnRfb25fY29sKCkpICE9IGxpc3QoaW5wdXQucmlnaHRfb25fY29sKCkpIGVsc2UgbGlzdChpbnB1dC5sZWZ0X29uX2NvbCgpKSwKICAgICAgICAgICAgICAgIGxlZnRfb249bGlzdChpbnB1dC5sZWZ0X29uX2NvbCgpKSBpZiBsaXN0KGlucHV0LmxlZnRfb25fY29sKCkpICE9IGxpc3QoaW5wdXQucmlnaHRfb25fY29sKCkpIGVsc2UgTm9uZSwKICAgICAgICAgICAgICAgIHJpZ2h0X29uPWxpc3QoaW5wdXQucmlnaHRfb25fY29sKCkpIGlmIGxpc3QoaW5wdXQubGVmdF9vbl9jb2woKSkgIT0gbGlzdChpbnB1dC5yaWdodF9vbl9jb2woKSkgZWxzZSBOb25lLAogICAgICAgICAgICAgICAgaG93ID0gIGlucHV0Lm1lcmdlX3dheSgpLAogICAgICAgICAgICApW2xpc3QoaW5wdXQubGVmdF9zYXZlX2NvbCgpKStsaXN0KGlucHV0LnJpZ2h0X3NhdmVfY29sKCkpXQogICAgICAgICAgICBtZF92YWx1ZSA9IG1lcmdlX2RhdGEuZ2V0KCkuY29weSgpCiAgICAgICAgICAgIG1kX3ZhbHVlLnVwZGF0ZSh7aW5wdXQubWVyZ2VfdGFibGVfbmFtZSgpOmRhdGF9KQogICAgICAgICAgICBtZXJnZV9kYXRhLnNldChtZF92YWx1ZSkKICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgiZGVsZXRlX21lcmdlX25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1saXN0KG1lcmdlX2RhdGEuZ2V0KCkua2V5cygpKStbIua4heepuiJdLHNlbGVjdGVkPU5vbmUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgIua4heepuiIgaW4gaW5wdXQuZGVsZXRlX21lcmdlX25hbWUoKToKICAgICAgICAgICAgICAgIG1lcmdlX2RhdGEuc2V0KHt9KQogICAgICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgiZGVsZXRlX21lcmdlX25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1bXSxzZWxlY3RlZD1Ob25lKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWRfdmFsdWUgPSBtZXJnZV9kYXRhLmdldCgpLmNvcHkoKQogICAgICAgICAgICAgICAgZm9yIGkgaW4gaW5wdXQuZGVsZXRlX21lcmdlX25hbWUoKToKICAgICAgICAgICAgICAgICAgICBtZF92YWx1ZS5wb3AoaSkKICAgICAgICAgICAgICAgIG1lcmdlX2RhdGEuc2V0KG1kX3ZhbHVlKQogICAgICAgICAgICAgICAgaWYgbWVyZ2VfZGF0YS5nZXQoKToKICAgICAgICAgICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJkZWxldGVfbWVyZ2VfbmFtZSIsbGFiZWw9Tm9uZSxjaG9pY2VzPWxpc3QobWVyZ2VfZGF0YSgpLmtleXMoKSkrWyLmuIXnqboiXSxzZWxlY3RlZD1Ob25lKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJkZWxldGVfbWVyZ2VfbmFtZSIsbGFiZWw9Tm9uZSxjaG9pY2VzPVtdLHNlbGVjdGVkPU5vbmUpCiAgICAgICAgICAgICAgICAgICAgCiAgICAjIOS7peagh+etvumhteWxleekum1lcmdlX2RhdGEKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgICMgQHJlYWN0aXZlLmV2ZW50KGlucHV0LmNvZF9tZXJnZV90YWJsZV9idXR0b24pCiAgICBkZWYgc2hvd19tZXJnZV9kYXRhKCk6CiAgICAgICAgaWYgbWVyZ2VfZGF0YS5nZXQoKToKICAgICAgICAgICAgZHMgPSBtZXJnZV9kYXRhLmdldCgpCiAgICAgICAgICAgIHJldHVybiB1aS5uYXZzZXRfdGFiKCpbdWkubmF2KGssZGZfdG9fdWlfdGFibGUodi5oZWFkKDEwMCksMzAwKSkgZm9yIGssdiBpbiBkcy5pdGVtcygpXSkKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHBpdm90X3RhYmxlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogICAgIyDliJvlu7pwaXZvdF90YWJsZeeahHVpCiAgICBAb3V0cHV0CiAgICBAcmVuZGVyLnVpCiAgICBkZWYgY3JlYXRlX3Bpdm90X3VpKCk6CiAgICAgICAgcmV0dXJuIHVpX3RhYmxlKDIsMzQwLAogICAgICAgICAgICBbIumAieaLqeihqOagvCIsdWkuaW5wdXRfc2VsZWN0aXplKCJzZWxlY3RfbWVyZ2VfYW5kX2RhdGFfdGFibGUiLE5vbmUsCiAgICAgICAgICAgICAgICBjaG9pY2VzID0gbGlzdChnZXRfZGF0YSgpLmtleXMoKSBpZiBnZXRfZGF0YSgpIGVsc2UgW10pICArIGxpc3QobWVyZ2VfZGF0YS5nZXQoKS5rZXlzKCkgaWYgbWVyZ2VfZGF0YS5nZXQoKSBlbHNlIFtdKSx3aWR0aD0iMTUwcHgiKV0sCiAgICAgICAgICAgIFsiaW5kZXgiLHVpLmlucHV0X3NlbGVjdGl6ZSgicGl2b3RfaW5kZXhfY29sIixOb25lLG11bHRpcGxlPVRydWUsCiAgICAgICAgICAgICAgICBjaG9pY2VzPVtdLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgWyJjb2x1bW4iLHVpLmlucHV0X3NlbGVjdGl6ZSgicGl2b3RfY29sdW1uX2NvbCIsTm9uZSxbXSxtdWx0aXBsZT1UcnVlLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgWyLlgLwiLHVpLmlucHV0X3NlbGVjdGl6ZSgicGl2b3RfdmFsdWVfY29sIixOb25lLFtdLG11bHRpcGxlPVRydWUsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICBbIuWHveaVsCIsdWkuaW5wdXRfc2VsZWN0aXplKCJwaXZvdF92YWx1ZV9mdW5jIixOb25lLFsic3VtIiwibWVhbiIsIm1heCIsIm1pbiIsImNvdW50Il0sd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAjIFsi5aGr5YWF57y65aSx5YC8Iix1aS5pbnB1dF90ZXh0KCJmaWxsX3Bpdm90X25hIixOb25lLE5vbmUpXSAsCiAgICAgICAgICAgIFsi6KGo5ZCNIiAsIHVpLmlucHV0X3RleHQoInBpdm90X3RhYmxlX25hbWUiLE5vbmUsIiIsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICBbIumAieaLqeWIoOmZpOihqOagvCIsdWkuaW5wdXRfc2VsZWN0aXplKCJkZWxldGVfcGl2b3RfbmFtZSIsTm9uZSxbXSxtdWx0aXBsZT1UcnVlLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgWyIiLHVpLmlucHV0X2FjdGlvbl9idXR0b24oImNvZF9waXZvdF90YWJsZV9idXR0b24iLCLlop7liKDooajmoLwiLHN0eWxlPXN0eWxlc1siYnV0dG9uIl0sd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAKICAgICMg5qC55o2u6KGo5qC85pu05paw5a2X5q61CiAgICBAcmVhY3RpdmUuRWZmZWN0KCkKICAgIGRlZiB1cGRhdGVfcGl2b3RfdWkoKToKICAgICAgICBpZiBpbnB1dC5zZWxlY3RfbWVyZ2VfYW5kX2RhdGFfdGFibGUoKToKICAgICAgICAgICAgYyA9IGxpc3QoZ2V0X2RhdGEoKVtpbnB1dC5zZWxlY3RfbWVyZ2VfYW5kX2RhdGFfdGFibGUoKV0uY29sdW1ucykgaWYgaW5wdXQuc2VsZWN0X21lcmdlX2FuZF9kYXRhX3RhYmxlKCkgaW4gbGlzdChnZXRfZGF0YSgpLmtleXMoKSkgZWxzZSBsaXN0KG1lcmdlX2RhdGEuZ2V0KClbaW5wdXQuc2VsZWN0X21lcmdlX2FuZF9kYXRhX3RhYmxlKCldLmNvbHVtbnMpCiAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoInBpdm90X2luZGV4X2NvbCIsbGFiZWw9Tm9uZSxjaG9pY2VzPWMpCiAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoInBpdm90X2NvbHVtbl9jb2wiLGxhYmVsPU5vbmUsY2hvaWNlcz1jKQogICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJwaXZvdF92YWx1ZV9jb2wiLGxhYmVsPU5vbmUsY2hvaWNlcz1jKQoKICAgICMg5pu05pawcGl2b3RfZGF0YQogICAgQHJlYWN0aXZlLkVmZmVjdAogICAgQHJlYWN0aXZlLmV2ZW50KGlucHV0LmNvZF9waXZvdF90YWJsZV9idXR0b24pCiAgICBkZWYgdXBkYXRlX3Bpdm90X2RhdGEoKToKICAgICAgICBpZiBub3QgYm9vbChpbnB1dC5kZWxldGVfcGl2b3RfbmFtZSgpKToKICAgICAgICAgICAgaWYgaW5wdXQucGl2b3RfdmFsdWVfZnVuYygpOgogICAgICAgICAgICAgICAgZnVuY19tYXAgPSB7InN1bSI6c3VtLCJtZWFuIjpsYW1iZGEgeDogcm91bmQoc3VtKHgpL2xlbih4KSwyKSwibWF4IjptYXgsIm1pbiI6bWluLCJjb3VudCI6bGVufQogICAgICAgICAgICAgICAgZGF0YSA9IHBkLnBpdm90X3RhYmxlKAogICAgICAgICAgICAgICAgICAgIG1lcmdlX2RhdGEuZ2V0KClbaW5wdXQuc2VsZWN0X21lcmdlX2FuZF9kYXRhX3RhYmxlKCldIGlmIGlucHV0LnNlbGVjdF9tZXJnZV9hbmRfZGF0YV90YWJsZSgpIGluIGxpc3QobWVyZ2VfZGF0YS5nZXQoKS5rZXlzKCkpIGVsc2UgZ2V0X2RhdGEoKVtpbnB1dC5zZWxlY3RfbWVyZ2VfYW5kX2RhdGFfdGFibGUoKV0sCiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBsaXN0KGlucHV0LnBpdm90X2luZGV4X2NvbCgpKSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5zID0gbGlzdChpbnB1dC5waXZvdF9jb2x1bW5fY29sKCkpLAogICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9bGlzdChpbnB1dC5waXZvdF92YWx1ZV9jb2woKSksCiAgICAgICAgICAgICAgICAgICAgYWdnZnVuYz0gZnVuY19tYXBbaW5wdXQucGl2b3RfdmFsdWVfZnVuYygpXQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbHNlIDoKICAgICAgICAgICAgICAgIGRhdGEgPSBwZC5waXZvdCgKICAgICAgICAgICAgICAgICAgICBtZXJnZV9kYXRhLmdldCgpW2lucHV0LnNlbGVjdF9tZXJnZV9hbmRfZGF0YV90YWJsZSgpXSBpZiBpbnB1dC5zZWxlY3RfbWVyZ2VfYW5kX2RhdGFfdGFibGUoKSBpbiBsaXN0KG1lcmdlX2RhdGEuZ2V0KCkua2V5cygpKSBlbHNlIGdldF9kYXRhKClbaW5wdXQuc2VsZWN0X21lcmdlX2FuZF9kYXRhX3RhYmxlKCldLAogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gbGlzdChpbnB1dC5waXZvdF9pbmRleF9jb2woKSksCiAgICAgICAgICAgICAgICAgICAgY29sdW1ucyA9IGxpc3QoaW5wdXQucGl2b3RfY29sdW1uX2NvbCgpKSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPWxpc3QoaW5wdXQucGl2b3RfdmFsdWVfY29sKCkpLAogICAgICAgICAgICAgICAgKSAgICAKICAgICAgICAgICAgcGl2b3RfdmFsdWUgPSBwaXZvdF9kYXRhLmdldCgpLmNvcHkoKQogICAgICAgICAgICBwaXZvdF92YWx1ZS51cGRhdGUoe2lucHV0LnBpdm90X3RhYmxlX25hbWUoKTpkYXRhfSkKICAgICAgICAgICAgcGl2b3RfZGF0YS5zZXQocGl2b3RfdmFsdWUpCiAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImRlbGV0ZV9waXZvdF9uYW1lIixsYWJlbD1Ob25lLGNob2ljZXM9bGlzdChwaXZvdF9kYXRhLmdldCgpLmtleXMoKSkrWyLmuIXnqboiXSxzZWxlY3RlZD1Ob25lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmICLmuIXnqboiIGluIGlucHV0LmRlbGV0ZV9waXZvdF9uYW1lKCk6CiAgICAgICAgICAgICAgICBwaXZvdF9kYXRhLnNldCh7fSkKICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImRlbGV0ZV9waXZvdF9uYW1lIixsYWJlbD1Ob25lLGNob2ljZXM9W10sc2VsZWN0ZWQ9Tm9uZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBpdm90X3ZhbHVlID0gcGl2b3RfZGF0YS5nZXQoKS5jb3B5KCkKICAgICAgICAgICAgICAgIGZvciBpIGluIGlucHV0LmRlbGV0ZV9waXZvdF9uYW1lKCk6CiAgICAgICAgICAgICAgICAgICAgcGl2b3RfdmFsdWUucG9wKGkpCiAgICAgICAgICAgICAgICBwaXZvdF9kYXRhLnNldChwaXZvdF92YWx1ZSkKICAgICAgICAgICAgICAgIGlmIHBpdm90X2RhdGEuZ2V0KCk6CiAgICAgICAgICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgiZGVsZXRlX3Bpdm90X25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1saXN0KHBpdm90X2RhdGEoKS5rZXlzKCkpK1si5riF56m6Il0sc2VsZWN0ZWQ9Tm9uZSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgiZGVsZXRlX3Bpdm90X25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1bXSxzZWxlY3RlZD1Ob25lKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICMg5bGV56S6cGl2b3RfdGFibGUKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBzaG93X3Bpdm90X2RhdGEoKToKICAgICAgICBpZiBwaXZvdF9kYXRhLmdldCgpOgogICAgICAgICAgICBkcyA9IHBpdm90X2RhdGEuZ2V0KCkKICAgICAgICAgICAgcmV0dXJuIHVpLm5hdnNldF90YWIoKlt1aS5uYXYoayxkZl90b191aV90YWJsZSh2LmhlYWQoMTAwKSwzMDAsVHJ1ZSkpIGZvciBrLHYgaW4gZHMuaXRlbXMoKV0pCiAgICAKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgZ3JvdXBieV9kYXRhICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICMg5Yib5bu66L+e5o6l6KGo55qEdWkKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBjcmVhdGVfZ3JvdXBieV91aSgpOgogICAgICAgIHJldHVybiB1aV90YWJsZSgKICAgICAgICAgICAgICAgICAgICAyLDM0MCwgIAogICAgICAgICAgICAgICAgICAgIFsi6YCJ5oup6KGo5qC8Iix1aS5pbnB1dF9zZWxlY3RpemUoInNtYWR0IixOb25lLAogICAgICAgICAgICAgICAgICAgIGNob2ljZXMgPWxpc3QoZ2V0X2RhdGEoKS5rZXlzKCkgaWYgZ2V0X2RhdGEoKSBlbHNlIFtdKSAgKyBsaXN0KG1lcmdlX2RhdGEuZ2V0KCkua2V5cygpIGlmIG1lcmdlX2RhdGEuZ2V0KCkgZWxzZSBbXSksd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgIFsi5YiG57uE5YiXIix1aS5pbnB1dF9zZWxlY3RpemUoImdyb3VwYnlfaW5kZXhfY29sIixOb25lLG11bHRpcGxlPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM9W10sd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgIFsi5L+d55WZ5YiXIix1aS5pbnB1dF9zZWxlY3RpemUoImdyb3VwYnlfY29sdW1uX2NvbCIsTm9uZSxbXSxtdWx0aXBsZT1UcnVlLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgICAgICAgICBbIuWHveaVsOmAiemhuSIsdWkuaW5wdXRfc2VsZWN0aXplKCJncm91cGJ5X2Z1bmNfa2luZCIsTm9uZSxbIuihjCIsIuWIlyIsImdyb3VwIl0sd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgIFsi5Ye95pWwIix1aS5pbnB1dF9zZWxlY3RpemUoImdyb3VwYnlfZnVuY19vcHRpb24iLE5vbmUsWyJzdW0iLCJtZWFuIiwibWF4IiwibWluIiwiY291bnQiXSx3aWR0aD0iMTUwcHgiKV0sCiAgICAgICAgICAgICAgICAgICAgWyLooajlkI0iICwgdWkuaW5wdXRfdGV4dCgiZ3JvdXBieV90YWJsZV9uYW1lIixOb25lLCIiLHdpZHRoPSIxNTBweCIpXSwKICAgICAgICAgICAgICAgICAgICBbIumAieaLqeWIoOmZpOihqOagvCIsdWkuaW5wdXRfc2VsZWN0aXplKCJkZWxldGVfZ3JvdXBieV9uYW1lIixOb25lLFtdLG11bHRpcGxlPVRydWUsd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgIFsiIix1aS5pbnB1dF9hY3Rpb25fYnV0dG9uKCJjb2RfZ3JvdXBieV90YWJsZV9idXR0b24iLCLlop7liKDooajmoLwiLHN0eWxlPXN0eWxlc1siYnV0dG9uIl0sd2lkdGg9IjE1MHB4IildLAogICAgICAgICAgICAgICAgICAgICkKCiAgICAjIOagueaNruihqOabtOaWsOWtl+autQogICAgQHJlYWN0aXZlLkVmZmVjdAogICAgZGVmIHVwZGF0ZV9ncm91cGJ5X3VpKCk6CiAgICAgICAgaWYgaW5wdXQuc21hZHQoKToKICAgICAgICAgICAgYyA9IGxpc3QoZ2V0X2RhdGEoKVtpbnB1dC5zbWFkdCgpXS5jb2x1bW5zKSBpZiBpbnB1dC5zbWFkdCgpIGluIGxpc3QoZ2V0X2RhdGEoKS5rZXlzKCkpIGVsc2UgbGlzdChtZXJnZV9kYXRhLmdldCgpW2lucHV0LnNtYWR0KCldLmNvbHVtbnMpCiAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImdyb3VwYnlfaW5kZXhfY29sIixsYWJlbD1Ob25lLGNob2ljZXM9YykKICAgICAgICAgICAgdWkudXBkYXRlX3NlbGVjdGl6ZSgiZ3JvdXBieV9jb2x1bW5fY29sIixsYWJlbD1Ob25lLGNob2ljZXM9YykKCiAgICAjIOabtOaWsGdyb3VwYnlfZGF0YeaVsOaNrgogICAgQHJlYWN0aXZlLkVmZmVjdAogICAgQHJlYWN0aXZlLmV2ZW50KGlucHV0LmNvZF9ncm91cGJ5X3RhYmxlX2J1dHRvbikKICAgIGRlZiB1cGRhdGVfZ3JvdXBieV9kYXRhKCk6CiAgICAgICAgaWYgbm90IGJvb2woaW5wdXQuZGVsZXRlX2dyb3VwYnlfbmFtZSgpKToKICAgICAgICAgICAgZnVuY19tYXAgPSB7InN1bSI6bnAuc3VtLCJtZWFuIjpucC5tZWFuLCJtZWRpYW4iOm5wLm1lZGlhbiwibWF4IjpucC5hbWF4LCJtaW4iOm5wLmFtaW4sImNvdW50IjpsYW1iZGEgeDpsZW4oeCkgaWYgbGVuKHguc2hhcGUpPT0xIGVsc2UgeC5zaGFwZVswXSp4LnNoYXBlWzFdfQogICAgICAgICAgICBkYXRhID0gbWVyZ2VfZGF0YS5nZXQoKVtpbnB1dC5zbWFkdCgpXSBpZiBpbnB1dC5zbWFkdCgpIGluIGxpc3QobWVyZ2VfZGF0YS5nZXQoKS5rZXlzKCkpIGVsc2UgZ2V0X2RhdGEoKVtpbnB1dC5zbWFkdCgpXQogICAgICAgICAgICBuZXdfZGF0YSA9IGRhdGEuZ3JvdXBieShsaXN0KGlucHV0Lmdyb3VwYnlfaW5kZXhfY29sKCkpKVtsaXN0KGlucHV0Lmdyb3VwYnlfY29sdW1uX2NvbCgpKV0KICAgICAgICAgICAgI+S4i+mdoumDveaYr+S7peWNleS4quWHveaVsOS4uuWIpOaWreagh+WHhgogICAgICAgICAgICBpZiBpbnB1dC5ncm91cGJ5X2Z1bmNfa2luZCgpID09ICLooYwiOgogICAgICAgICAgICAgICAgbmV3X2RhdGEyID0gbmV3X2RhdGEuYXBwbHkoZnVuY19tYXBbaW5wdXQuZ3JvdXBieV9mdW5jX29wdGlvbigpXSxheGlzPTEpCiAgICAgICAgICAgICAgICBuZXdfZGF0YTIuY29sdW1ucyA9IFtpbnB1dC5ncm91cGJ5X2Z1bmNfb3B0aW9uKCldCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBpbnB1dC5ncm91cGJ5X2Z1bmNfa2luZCgpID09ICLliJciOgogICAgICAgICAgICAgICAgICAgIG5ld19kYXRhMiA9IG5ld19kYXRhLmFnZyhmdW5jX21hcFtpbnB1dC5ncm91cGJ5X2Z1bmNfb3B0aW9uKCldKQogICAgICAgICAgICAgICAgIyDov5jmnIlncm91cOayoeacieWGmQogICAgICAgICAgICBncm91cGJ5X3ZhbHVlID0gZ3JvdXBieV9kYXRhLmdldCgpLmNvcHkoKQogICAgICAgICAgICBncm91cGJ5X3ZhbHVlLnVwZGF0ZSh7aW5wdXQuZ3JvdXBieV90YWJsZV9uYW1lKCk6bmV3X2RhdGEyfSkKICAgICAgICAgICAgZ3JvdXBieV9kYXRhLnNldChncm91cGJ5X3ZhbHVlKQogICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJkZWxldGVfZ3JvdXBieV9uYW1lIixsYWJlbD1Ob25lLGNob2ljZXM9bGlzdChncm91cGJ5X2RhdGEuZ2V0KCkua2V5cygpKStbIua4heepuiJdLHNlbGVjdGVkPU5vbmUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgIua4heepuiIgaW4gaW5wdXQuZGVsZXRlX2dyb3VwYnlfbmFtZSgpOgogICAgICAgICAgICAgICAgZ3JvdXBieV9kYXRhLnNldCh7fSkKICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImRlbGV0ZV9ncm91cGJ5X25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1bXSxzZWxlY3RlZD1Ob25lKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZ3JvdXBieV92YWx1ZSA9IGdyb3VwYnlfZGF0YS5nZXQoKS5jb3B5KCkKICAgICAgICAgICAgICAgIGZvciBpIGluIGlucHV0LmRlbGV0ZV9ncm91cGJ5X25hbWUoKToKICAgICAgICAgICAgICAgICAgICBncm91cGJ5X3ZhbHVlLnBvcChpKQogICAgICAgICAgICAgICAgZ3JvdXBieV9kYXRhLnNldChncm91cGJ5X3ZhbHVlKQogICAgICAgICAgICAgICAgaWYgZ3JvdXBieV9kYXRhLmdldCgpOgogICAgICAgICAgICAgICAgICAgIHVpLnVwZGF0ZV9zZWxlY3RpemUoImRlbGV0ZV9ncm91cGJ5X25hbWUiLGxhYmVsPU5vbmUsY2hvaWNlcz1saXN0KGdyb3VwYnlfZGF0YSgpLmtleXMoKSkrWyLmuIXnqboiXSxzZWxlY3RlZD1Ob25lKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB1aS51cGRhdGVfc2VsZWN0aXplKCJkZWxldGVfZ3JvdXBieV9uYW1lIixsYWJlbD1Ob25lLGNob2ljZXM9W10sc2VsZWN0ZWQ9Tm9uZSkKICAgICAgICAgICAgICAgICAgICAKICAgICMg5Lul5qCH562+6aG15bGV56S6Z3JvdXBieV9kYXRhCiAgICBAb3V0cHV0CiAgICBAcmVuZGVyLnVpCiAgICBkZWYgc2hvd19ncm91cGJ5X2RhdGEoKToKICAgICAgICBpZiBncm91cGJ5X2RhdGEuZ2V0KCk6CiAgICAgICAgICAgIGRzID0gZ3JvdXBieV9kYXRhLmdldCgpCiAgICAgICAgICAgIHJldHVybiB1aS5uYXZzZXRfdGFiKCpbdWkubmF2KGssZGZfdG9fdWlfdGFibGUodi5oZWFkKDEwMCksMzAwLFRydWUpKSBmb3Igayx2IGluIGRzLml0ZW1zKCldKQogICAgCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBncmFwaCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAj5Yib5bu6Z3JhcGhfdWkKICAgIEBvdXRwdXQKICAgIEByZW5kZXIudWkKICAgIGRlZiBjcmVhdGVfZ3JhcGhfdWkoKToKICAgICAgICByZXR1cm4gdWkuZGl2KAogICAgICAgIHVpLmlucHV0X3NlbGVjdGl6ZSgiZ3JhcGhfdGFibGUiLCLpgInmi6nooajmoLwiLGNob2ljZXM9bGlzdChncm91cGJ5X2RhdGEuZ2V0KCkua2V5cygpKSx3aWR0aD0iMTUwcHgiKSwKICAgICAgICB1aS5pbnB1dF9hY3Rpb25fYnV0dG9uKCJjb2RfZ3JhcGhfYnV0dG9uIiwi55Sf5oiQ5Zu+54mHIix3aWR0aD0iMTUwcHgiKQogICAgICAgICkKICAgIAogICAgIyDlsZXnpLrlm77ooagKICAgIEBvdXRwdXQKICAgIEByZW5kZXIucGxvdAogICAgQHJlYWN0aXZlLmV2ZW50KGlucHV0LmNvZF9ncmFwaF9idXR0b24pICAgIAogICAgZGVmIHNob3dfZ3JhcGgoKToKICAgICAgICBpZiBpbnB1dC5ncmFwaF90YWJsZSgpOgogICAgICAgICAgICBmaWcsYXggPSBwbHQuc3VicGxvdHMoMSwxKQogICAgICAgICAgICBncm91cGJ5X2RhdGEuZ2V0KClbaW5wdXQuZ3JhcGhfdGFibGUoKV0ucGxvdCgKICAgICAgICAgICAgICAgIGtpbmQ9ImJhciIsCiAgICAgICAgICAgICAgICBheCA9IGF4CiAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIGZpZwogICAgCiAgICAjIOWIm+W7unBpdm90X3RhYmxlKCkKCmFwcCA9IEFwcChhcHBfdWksc2VydmVyKQo=", "type": "binary"}, {"name": "requirements.txt", "content": "matplotlib\nfsspec==2023.4.0", "type": "text"}]